core: 7.x
api: '2'
projects:
  civicrm:
    type: module
    download:
      type: get
      # Check for the latest version at: https://civicrm.org/download/list
      url: 'https://download.civicrm.org/civicrm-4.7.21-drupal.tar.gz'
    patch:
      - 'https://issues.civicrm.org/jira/secure/attachment/43773/CRM-17662_0.patch'
      - 'https://issues.civicrm.org/jira/secure/attachment/56872/CRM-19915.patch'
      # These two patches are required to fix underlying bugs exposed by the
      # org.ndi.fieldvaluepermission extension. They are both in PR:
      # https://github.com/civicrm/civicrm-core/pull/10068. These patches are
      # pulled from AGH's PR branch. Andrew agreed not to delete the branch as
      # soon as the PR is accepted, and instead wait until the next CiviCRM
      # release, so that we can remove these patches. We should let him know
      # once we have removed these patches though, as a courtesy.
      - 'https://github.com/agh1/civicrm-core/commit/cd8027584a6fa6457a0119b6b52c1d299b8d5362.patch'
      - 'https://github.com/agh1/civicrm-core/commit/a44d527c01eaf715a2447e7a0d154369cc91b658.patch'

libraries:
  civicrm_l10n_core:
    destination: modules/contrib/civicrm
    directory_name: l10n
    download:
      type: file
      url: 'https://download.civicrm.org/civicrm-l10n-core/archives/civicrm-l10n-daily.tar.gz'
    overwrite: true
